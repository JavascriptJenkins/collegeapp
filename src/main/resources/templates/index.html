<!DOCTYPE html>
<html>
<head>
    <title>Home</title>

    <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" media="all" href="/css/table.css" th:href="@{/css/table.css}" />
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">


    <script>
        function vote(vote,id){
            console.log(vote);


            $("#voteInput").val(vote);
            $("#voteInputID").val(id);



        }
    </script>

</head>
<body>


<div th:insert="navbar.html :: navbarfragment"> </div>

<!--<div th:insert="table.html :: tablefragment" th:with="newWorker=${newWorkerValue}"> </div>-->

<div class="container">

    <!--<table>-->
    <!--    <tr th:each="professor : ${professors}">-->
    <!--        <td th:text="${professor.professor_id}"></td>-->
    <!--        <td th:text="${professor.professor_name}"></td>-->
    <!--        <td th:text="${professor.hire_date}"></td>-->
    <!--    </tr>-->
    <!--</table>-->

    <form th:action="@{/vote}" th:object="${canceltrain}" method="post">
        <div class="page-content page-container" id="page-content">
        <div class="padding">
            <div class="row container d-flex justify-content-center">
                <div class="col-md-8">
                    <div class="box">
                        <div class="box-header with-border">
                            <h3 class="box-title">Welcome aboard the cancel train!</h3>
                        </div> <!-- /.box-header -->
                        <div class="box-body">
                            <table class="table table-bordered">
                                <tbody>
                                <tr>
                                    <th style="width: 10px">#</th>
                                    <th>Name</th>
                                    <th>Cancel Status</th>
                                    <th style="width: 100px">Upvote</th>
                                    <th style="width: 60px">Downvote</th>
                                </tr>
                                <tr th:each="canceltrain : ${canceltrains}">
                                    <td th:text="${canceltrain.id}"></td>
                                    <td th:text="${canceltrain.fname}+ ${canceltrain.lname}"></td>
                                    <td>
                                        <div class="progress progress-xs">

                                            <div class="progress-bar progress-bar-danger" th:style="'width:'+@{${canceltrain.upvotes}-${canceltrain.downvotes}}+'%;'"></div>
                                        </div>
                                    </td>
                                    <td>
                                        <span th:text="${canceltrain.upvotes} "></span>
                                        <button th:attr="onclick=|vote(1,'${canceltrain.id}')|" type="submit" class="invisiblebutton">
                                            <i class="btn btn-light bi-arrow-up-circle" href="#"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <span  th:text="${canceltrain.downvotes} "></span>
                                        <button th:attr="onclick=|vote(0,'${canceltrain.id}')|" type="submit" class="invisiblebutton">
                                            <i  class="btn btn-light bi-arrow-down-circle" href="#"></i>
                                        </button>
                                    </td>
                                </tr>

                                </tbody>
                            </table>
                        </div>





                        <!-- /.box-body -->
                        <!--                        <div class="box-footer clearfix">-->
                        <!--                            <ul class="pagination pagination-sm no-margin pull-right">-->
                        <!--                                <li><a href="#" data-abc="true">«</a></li>-->
                        <!--                                <li><a href="#" data-abc="true">1</a></li>-->
                        <!--                                <li><a href="#" data-abc="true">2</a></li>-->
                        <!--                                <li><a href="#" data-abc="true">3</a></li>-->
                        <!--                                <li><a href="#" data-abc="true">»</a></li>-->
                        <!--                            </ul>-->
                        <!--                        </div>-->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <input id="voteInput" style="display: none;" type="text" th:field="*{incomingVote}" >
    <input id="voteInputID" style="display: none;" type="text" th:field="*{id}" >

    </form>



<!--    <img src="https://media.istockphoto.com/photos/hanging-out-on-campus-picture-id1295133466" class="d-block w-100" alt="...">-->



<!--    <div th:if="${loggedInUserName == null}" class="container">-->
<!--        <h1>Please login below.</h1>-->

<!--        <form th:action="@{/home/login}" th:object="${student}" method="post">-->

<!--            <div class="alert alert-danger" role="alert" th:if="${errorMessage}" th:text="${errorMessage}">Error</div>-->
<!--            <div class="alert alert-info" role="alert" th:if="${successMessage}" th:text="${successMessage}">Success</div>-->

<!--            <div class="row">-->

<!--                <div class="col">-->
<!--                    <input type="text" th:field="*{studentName}" class="form-control" placeholder="Student Name" aria-label="Student Name">-->
<!--                </div>-->

<!--                <div class="col">-->
<!--                    <input type="text" th:field="*{studentIDNumber}" class="form-control" placeholder="Student Id Number" aria-label="Student Id Number">-->
<!--                </div>-->


<!--            </div>-->

<!--            <button style="margin-top:5px;" type="submit" class="btn btn-primary">Submit</button>-->

<!--        </form>-->
<!--    </div>-->



</div>

<div class="container" th:if="${successMessage} == null">
    <form th:action="@{/newCancel}" th:object="${canceltrainNewCancel}" method="post">

        <div class="alert alert-danger" role="alert" th:if="${errorMessage}" th:text="${errorMessage}">Error</div>
        <div class="alert alert-info" role="alert" th:if="${successMessage}" th:text="${successMessage}">Success</div>

        <div class="mb-3">
            <label for="inputFName" class="form-label">First Name</label>
            <input th:field="*{fname}" type="text" class="form-control" id="inputFName" aria-describedby="emailHelp">
<!--            <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>-->
        </div>
        <div class="mb-3">
            <label for="inputLName" class="form-label">Last Name</label>
            <input th:field="*{lname}" type="text" class="form-control" id="inputLName">
        </div>

        <div class="mb-3">
            <label for="inputWhy" class="form-label">Why?</label>
            <input th:field="*{why}" type="text" class="form-control" id="inputWhy">
            <div id="whyHelp" class="form-text">Why should this person be canceled?</div>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

</div>


</body>
</html>